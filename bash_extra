# additions to ~/.bashrc

# instantly append to history every command
export PROMPT_COMMAND="history -a"

# check if this is a ssh session
if [ -n "${SSH_CLIENT}" ] || [ -n "${SSH_TTY}" ]; then
  export SESSION_TYPE="remote_ssh"
else
  case $(ps -o comm= -p $PPID) in
    sshd|*/sshd) export SESSION_TYPE="remote_ssh";;
  esac
fi

# enable display on ssh connections
if [[ "${SESSION_TYPE}" == "remote_ssh" ]]; then
    export DISPLAY=:0
fi

# custom prompt
if [ -f ~/.bash_prompt ]; then
   source ~/.bash_prompt
fi

# local ip shortcuts
export macbookair="192.168.1.1"
export npower_pi="root@192.168.1.20"

# ros environment
if [[ -f /opt/ros/noetic/setup.bash ]]; then
    source /opt/ros/noetic/setup.bash
fi

# append extra paths
source ~/.macos-dotfiles/bin/append_paths ~/.macos-dotfiles/extra_paths

# use clang and Ninja with CMake
export CC="$(which clang)"
export CXX="${CC}++"
export CMAKE_GENERATOR="Ninja"

# aliases
export TRASH="${HOME}/.local/share/Trash/files"
mkdir -p "${TRASH}"
if [[ -f ~/.bash_aliases ]]; then
   source ~/.bash_aliases
fi
